<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player List</title>
    <link rel="stylesheet" href="style.css">   
</head>
<body>
    <div class="top">
        <form id="playerForm">
            <label for="playerName">Player Name:</label>
            <input type="text" id="playerName" name="playerName" required>
            <br>
            <label for="strength">Power:</label>
            <input type="range" id="strength" name="strength" min="1" max="100" value="50">
            <span id="strengthValue">50</span>
            <br>
            <label for="position">Position:</label>
            <select id="position" name="position" required>
                <option value="Defense">Defense</option>
                <option value="Midfield">Midfield</option>
                <option value="Forward">Forward</option>
            </select>
            <br>
            <button type="submit">Add Player</button>
        </form>
        <div>
            <h2>Players:</h2>
            <ol  id="playerList"></ol>
        </div>
    </div>
    <button id="createTeams">Takımları Oluştur</button>
    <div class="teams">
        <div>
            <h2>Team 1:</h2>
            <p id="team1Strength">Total Power: 0</p>
            <ol id="team1"></ol>
        </div>
        <div>
            <h2>Team 2:</h2>
            <p id="team2Strength">Total Power: 0</p>
            <ol  id="team2"></ol>        
        </div>
    </div>
    <script>
        const players = JSON.parse(localStorage.getItem('players')) || [];

        function updatePlayerList() {
            const playerList = document.getElementById('playerList');
            playerList.innerHTML = '';
            players.forEach((player, index) => {
                const listItem = createPlayerListItem(player);

                const removeButton = document.createElement('button');
                removeButton.textContent = 'Sil';
                removeButton.style.marginLeft = '10px';
                removeButton.addEventListener('click', () => {
                    removePlayer(index);
                });

                listItem.appendChild(removeButton);
                playerList.appendChild(listItem);
            });

            document.querySelectorAll('.player-item').forEach(item => {
                const strengthSlider = item.querySelector('.strength-slider');
                strengthSlider.addEventListener('input', function() {
                    const playerStrength = item.querySelector('.player-strength');
                    playerStrength.textContent = this.value;
                    // Update player object in the players array
                    const player = players.find(p => p.name === item.querySelector('.player-name').textContent);
                    if (player) {
                        player.strength = parseInt(this.value, 10);
                    }
                });
            });
        }

        function removePlayer(index) {
            players.splice(index, 1);
            localStorage.setItem('players', JSON.stringify(players));
            updatePlayerList();
        }

        document.getElementById('strength').addEventListener('input', function() {
            document.getElementById('strengthValue').textContent = this.value;
        });

        document.getElementById('playerForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const playerName = document.getElementById('playerName').value;
            const strength = document.getElementById('strength').value;
            const position = document.getElementById('position').value;

            const player = { name: playerName, strength: parseInt(strength), position: position };
            players.push(player);
            localStorage.setItem('players', JSON.stringify(players));

            updatePlayerList();

            // Formu temizle
            document.getElementById('playerForm').reset();
            document.getElementById('strengthValue').textContent = '50';
        });

        document.getElementById('createTeams').addEventListener('click', function() {
            // Shuffle players array to ensure randomness
            const shuffledPlayers = players.sort(() => 0.5 - Math.random());

            const team1 = [];
            const team2 = [];
            let team1Strength = 0;
            let team2Strength = 0;

            const positions = ['Defense', 'Midfield', 'Forward'];
            positions.forEach(position => {
                const positionPlayers = shuffledPlayers.filter(player => player.position === position);
                positionPlayers.forEach(player => {
                    if (team1Strength <= team2Strength) {
                        team1.push(player);
                        team1Strength += player.strength;
                    } else {
                        team2.push(player);
                        team2Strength += player.strength;
                    }
                });
            });

            const team1List = document.getElementById('team1');
            const team2List = document.getElementById('team2');
            team1List.innerHTML = '';
            team2List.innerHTML = '';

            team1.forEach(player => {
                const listItem = createPlayerListItem(player);
                team1List.appendChild(listItem);
            });

            team2.forEach(player => {
                const listItem = createPlayerListItem(player);
                team2List.appendChild(listItem);
            });
            document.getElementById('team1Strength').textContent = `Total Power: ${team1Strength} - Player Count: ${team1.length}`;
            document.getElementById('team2Strength').textContent = `Total Power: ${team2Strength} - Player Count: ${team2.length}`;
        });

        function createPlayerListItem(player) {
            const listItem = document.createElement('li');
            listItem.classList.add('player-item');
            listItem.innerHTML = `
                <span class="player-name">${player.name}</span> 
                <span class="player-strength">${player.strength}</span> 
                <span class="player-position">${player.position}</span>
                <div class="edit-controls">
                    <input type="range" class="strength-slider" min="0" max="100" value="${player.strength}">
                </div>
            `;
            return listItem;
        }

        // Sayfa yüklendiğinde oyuncu listesini başlat
        updatePlayerList();
    </script>
</body>
</html>
